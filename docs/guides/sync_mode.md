---
sidebar_position: 2
---

# 同步模式

## 媒体库模式

媒体库模式下，音流需要将服务器端的歌曲列表、专辑列表和歌手列表完全同步到本地，以此获得完整的音乐库数据。

在此模式下，音流可以借助完整的音乐库数据实现一些服务端未实现的功能，如文件夹视图、歌单导入及部分高级筛选功能。

但凡事有利就有弊，由于需要完整同步服务端数据，**若您的曲库较大，同步过程会耗费很多的时间**。

### 自动同步

应用启动时会检测服务端歌曲数量，如果大于本地副本歌曲数量，则增量同步缺失的数据。

:::warning

增量更新的原理是按歌曲添加时间倒序查询，因此若您在服务端删除或修改过歌曲，则需要手动点击同步按钮从头同步。

:::

应用启动时需要恢复上次播放列表，某些音乐服务的歌曲资源或图片资源需要登录后才能获取，因此将播放器的初始化放在了登录操作之后，若您在播放歌曲时遇到了**播放器正在初始化**的提示，请耐心等待片刻。

### 手动同步

若自动同步无法满足您的需求，请点击音乐资料库的「立即同步」按钮手动更新本地副本。

:::info

手动同步是全量更新，若同步过程中中断，下次启动后会自动进行增量更新。

:::

## 直连模式

在直连模式下，音流不会将服务端的数据同步到本地，而是在您每次操作时单独获取数据。若您的曲库较大，可以尝试开启此选项，以提升首次进入应用时的体验。

但请注意，由于直连模式完全依赖服务端接口的返回结果，现有功能可能会失去部分特性：

- 每日推荐无法筛选歌曲时长，即可能有部分长音频进入每日推荐。
- 无法检测重复歌曲。
- 在没有文件夹接口的服务端（Subsonic/Navidrome/Jellyfin）中，文件夹功能仅显示本地副本中的数据（即手动查询过的数据）。
- 部分排序和过滤功能不可用。

:::info 画饼中...

我个人有轻微的仓鼠症，曲库在可以预见的未来将会越来越大，直连模式上线后，从我自己的体验来看，除了一些小功能缺失外，整体还是很不错的。

所以以后**直连模式肯定是音流主力优化的方向**，但毕竟所有数据都来自对应的服务端接口，若服务端没有对应的接口，我也无能为力，所以一个天真的构想就诞生了：以后要做一个音流专属的音乐服务端。

:::